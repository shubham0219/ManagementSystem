(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{PgJR:function(e,o,r){"use strict";r.r(o),r.d(o,"EmployeeModule",(function(){return M}));var t=r("tyNb"),i=r("ofXK"),l=r("3Pt+"),n=r("fXoL"),a=r("qjMU");function m(e,o){if(1&e&&(n.Nb(0,"span",19),n.jc(1),n.Mb()),2&e){const e=n.Xb();n.Ab(1),n.lc(" ",e.formErrors.fullName," ")}}function s(e,o){if(1&e&&(n.Nb(0,"span",19),n.jc(1),n.Mb()),2&e){const e=n.Xb();n.Ab(1),n.lc(" ",e.formErrors.email," ")}}function b(e,o){if(1&e&&(n.Nb(0,"span",19),n.jc(1),n.Mb()),2&e){const e=n.Xb();n.Ab(1),n.lc(" ",e.formErrors.confirmEmail?e.formErrors.confirmEmail:e.formErrors.emailGroup," ")}}function c(e,o){if(1&e&&(n.Nb(0,"span",19),n.jc(1),n.Mb()),2&e){const e=n.Xb();n.Ab(1),n.lc(" ",e.formErrors.phone," ")}}const p=function(e){return{"has-error":e}};let u=(()=>{class e{constructor(e,o,r,t){this.formBuilder=e,this.route=o,this.employeeService=r,this.router=t,this.validationMessages={fullName:{required:"Full Name is required.",minlength:"Full Name must be greater than 2 characters.",maxlength:"Full Name must be less than 30 characters."},email:{required:"E-mail is required.",pattern:"E-mail must be a valid email address."},confirmEmail:{required:"Confirm e-mail is required.",pattern:"Confirm e-mail must be a valid email address."},emailGroup:{emailMismatch:"E-mail & Confirm E-mail do not match."},phone:{required:"Phone number is required.",pattern:"Phone number must be of 10 digits"}},this.formErrors={fullName:"",email:"",confirmEmail:"",emailGroup:"",phone:""}}ngOnInit(){this.employeeForm=this.formBuilder.group({fullName:["",[l.k.required,l.k.minLength(2),l.k.maxLength(30)]],emailGroup:this.formBuilder.group({email:["",[l.k.required,l.k.pattern("^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$")]],confirmEmail:["",[l.k.required,l.k.pattern("^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$")]]},{validators:f}),phone:["",[l.k.required,l.k.pattern("^[0-9]{3}-[0-9]{3}-[0-9]{4}|[0-9]{10}$")]]}),this.employeeForm.valueChanges.subscribe(e=>{this.logValidationErrors(this.employeeForm)}),this.route.paramMap.subscribe(e=>{const o=+e.get("id");o?(this.pageTitle="Edit Employee",this.getEmployee(o)):(this.pageTitle="Create Employee",this.employee={id:null,fullName:"",email:"",phone:null})})}getEmployee(e){this.employeeService.getEmployee(e).subscribe(e=>{this.employee=e,this.editEmployee(e)},e=>console.log(e))}editEmployee(e){this.employeeForm.patchValue({fullName:e.fullName,emailGroup:{email:e.email,confirmEmail:e.email},phone:e.phone})}onSubmit(){this.mapFormValuesToEmpModal(),this.employee.id?this.employeeService.updateEmployee(this.employee).subscribe(()=>this.router.navigate(["employees"]),e=>console.log(e)):this.employeeService.addEmployee(this.employee).subscribe(()=>this.router.navigate(["employees"]),e=>console.log(e))}mapFormValuesToEmpModal(){this.employee.fullName=this.employeeForm.value.fullName,this.employee.email=this.employeeForm.value.emailGroup.email,this.employee.phone=this.employeeForm.value.phone}logValidationErrors(e=this.employeeForm){Object.keys(e.controls).forEach(o=>{const r=e.get(o);if(this.formErrors[o]="",r&&!r.valid&&(r.touched||r.dirty||""!==r.value)){const e=this.validationMessages[o];for(const t in r.errors)t&&(this.formErrors[o]+=e[t]+"")}r instanceof l.d&&this.logValidationErrors(r)})}}return e.\u0275fac=function(o){return new(o||e)(n.Kb(l.b),n.Kb(t.a),n.Kb(a.a),n.Kb(t.b))},e.\u0275cmp=n.Eb({type:e,selectors:[["app-create-employee"]],decls:35,vars:19,consts:[[1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"panel","panel-primary"],[1,"panel-heading"],[1,"panel-title"],[1,"panel-body"],[1,"form-group",3,"ngClass"],["for","fullName",1,"col-sm-2","control-label"],[1,"col-sm-8"],["id","fullName","type","text","formControlName","fullName",1,"form-control",3,"blur"],["class","help-block",4,"ngIf"],["formGroupName","emailGroup"],["for","email",1,"col-sm-2","control-label"],["id","email","type","email","formControlName","email",1,"form-control",3,"blur"],["for","confirmEmail",1,"col-sm-2","control-label"],["id","confirmEmail","type","email","formControlName","confirmEmail",1,"form-control",3,"blur"],["for","phone",1,"col-sm-2","control-label"],["id","phone","type","text","formControlName","phone",1,"form-control",3,"blur"],[1,"panel-footer"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"help-block"]],template:function(e,o){1&e&&(n.Nb(0,"form",0),n.Vb("ngSubmit",(function(){return o.onSubmit()})),n.Nb(1,"div",1),n.Nb(2,"div",2),n.Nb(3,"h3",3),n.jc(4),n.Mb(),n.Mb(),n.Nb(5,"div",4),n.Nb(6,"div",5),n.Nb(7,"label",6),n.jc(8,"Full Name"),n.Mb(),n.Nb(9,"div",7),n.Nb(10,"input",8),n.Vb("blur",(function(){return o.logValidationErrors()})),n.Mb(),n.ic(11,m,2,1,"span",9),n.Mb(),n.Mb(),n.Nb(12,"div",10),n.Nb(13,"div",5),n.Nb(14,"label",11),n.jc(15,"E-mail"),n.Mb(),n.Nb(16,"div",7),n.Nb(17,"input",12),n.Vb("blur",(function(){return o.logValidationErrors()})),n.Mb(),n.ic(18,s,2,1,"span",9),n.Mb(),n.Mb(),n.Nb(19,"div",5),n.Nb(20,"label",13),n.jc(21,"Confirm E-mail"),n.Mb(),n.Nb(22,"div",7),n.Nb(23,"input",14),n.Vb("blur",(function(){return o.logValidationErrors()})),n.Mb(),n.ic(24,b,2,1,"span",9),n.Mb(),n.Mb(),n.Mb(),n.Nb(25,"div",5),n.Nb(26,"label",15),n.jc(27,"Phone"),n.Mb(),n.Nb(28,"div",7),n.Nb(29,"input",16),n.Vb("blur",(function(){return o.logValidationErrors()})),n.Mb(),n.ic(30,c,2,1,"span",9),n.Mb(),n.Mb(),n.Nb(31,"div",17),n.Nb(32,"button",18),n.jc(33,"Save"),n.Mb(),n.Mb(),n.Mb(),n.Mb(),n.Mb(),n.Lb(34,"br")),2&e&&(n.ac("formGroup",o.employeeForm),n.Ab(4),n.kc(o.pageTitle),n.Ab(2),n.ac("ngClass",n.bc(11,p,o.formErrors.fullName)),n.Ab(5),n.ac("ngIf",o.formErrors.fullName),n.Ab(2),n.ac("ngClass",n.bc(13,p,o.formErrors.email)),n.Ab(5),n.ac("ngIf",o.formErrors.email),n.Ab(1),n.ac("ngClass",n.bc(15,p,o.formErrors.confirmEmail||o.formErrors.emailGroup)),n.Ab(5),n.ac("ngIf",o.formErrors.confirmEmail||o.formErrors.emailGroup),n.Ab(1),n.ac("ngClass",n.bc(17,p,o.formErrors.phone)),n.Ab(5),n.ac("ngIf",o.formErrors.phone),n.Ab(2),n.ac("disabled",o.employeeForm.invalid))},directives:[l.l,l.i,l.e,i.h,l.a,l.h,l.c,i.j,l.f],styles:[".btn[_ngcontent-%COMP%]{margin-left:5px}hr[_ngcontent-%COMP%]{border:1px solid silver}"]}),e})();function f(e){const o=e.get("email"),r=e.get("confirmEmail");return o.value===r.value||r.pristine&&""===r.value?null:{emailMismatch:!0}}function d(e,o){if(1&e){const e=n.Ob();n.Nb(0,"tr"),n.Nb(1,"td"),n.jc(2),n.Mb(),n.Nb(3,"td"),n.jc(4),n.Mb(),n.Nb(5,"td"),n.jc(6),n.Mb(),n.Nb(7,"td"),n.Nb(8,"button",6),n.Vb("click",(function(){n.dc(e);const r=o.$implicit;return n.Xb(2).editEmployee(r.id)})),n.jc(9," Edit "),n.Mb(),n.Nb(10,"button",7),n.Vb("click",(function(){n.dc(e);const r=o.$implicit;return n.Xb(2).delete(r.id)})),n.jc(11," Delete "),n.Mb(),n.Mb(),n.Mb()}if(2&e){const e=o.$implicit;n.Ab(2),n.kc(e.fullName),n.Ab(2),n.kc(e.email),n.Ab(2),n.kc(e.phone)}}function h(e,o){if(1&e&&(n.Nb(0,"table",3),n.Nb(1,"thead"),n.Nb(2,"tr",4),n.Nb(3,"th"),n.jc(4,"Name"),n.Mb(),n.Nb(5,"th"),n.jc(6,"Email"),n.Mb(),n.Nb(7,"th"),n.jc(8,"Phone"),n.Mb(),n.Nb(9,"th"),n.jc(10,"Action"),n.Mb(),n.Mb(),n.Mb(),n.Nb(11,"tbody"),n.ic(12,d,12,3,"tr",5),n.Mb(),n.Mb()),2&e){const e=n.Xb();n.Ab(12),n.ac("ngForOf",e.employees)}}function y(e,o){1&e&&(n.Nb(0,"div",8),n.Nb(1,"h2",9),n.jc(2,"No records available."),n.Mb(),n.Mb())}const g=[{path:"",component:(()=>{class e{constructor(e,o){this.employeeService=e,this.router=o}ngOnInit(){this.getEmployees()}getEmployees(){this.employeeService.getEmployees().subscribe(e=>this.employees=e,e=>console.log(e))}editEmployee(e){this.router.navigate(["/employees/edit",e])}delete(e){confirm("Are you sure you want to delete this employee record ?")&&this.employeeService.deleteEmployee(e).subscribe(e=>{this.getEmployees()})}}return e.\u0275fac=function(o){return new(o||e)(n.Kb(a.a),n.Kb(t.b))},e.\u0275cmp=n.Eb({type:e,selectors:[["app-list-employee"]],decls:3,vars:2,consts:[[1,"table-responsive"],["class","table table-bordered",4,"ngIf"],["class","ml-3 mb-4",4,"ngIf"],[1,"table","table-bordered"],[1,"bg-primary"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"ml-3","mb-4"],[1,"data-msg","mt-4","ml-2"]],template:function(e,o){1&e&&(n.Nb(0,"div",0),n.ic(1,h,13,1,"table",1),n.ic(2,y,3,0,"div",2),n.Mb()),2&e&&(n.Ab(1),n.ac("ngIf",o.employees&&o.employees.length),n.Ab(1),n.ac("ngIf",0==(null==o.employees?null:o.employees.length)||!o.employees))},directives:[i.j,i.i],styles:[".btn-danger[_ngcontent-%COMP%]{margin-left:5px}"]}),e})()},{path:"create",component:u},{path:"edit/:id",component:u}];let N=(()=>{class e{}return e.\u0275mod=n.Ib({type:e}),e.\u0275inj=n.Hb({factory:function(o){return new(o||e)},imports:[[t.e.forChild(g),l.g,l.j,i.b],t.e]}),e})(),E=(()=>{class e{}return e.\u0275mod=n.Ib({type:e}),e.\u0275inj=n.Hb({factory:function(o){return new(o||e)},imports:[[],i.b,l.j]}),e})(),M=(()=>{class e{}return e.\u0275mod=n.Ib({type:e}),e.\u0275inj=n.Hb({factory:function(o){return new(o||e)},imports:[[N,E]]}),e})()}}]);